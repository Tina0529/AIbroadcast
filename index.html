<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="favicon2.jpeg">
    <title>DenyaのAI智能播报小助手</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            background-color: #f8f9fa; /* Light neutral background */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: #495057; /* Soft text color */
        }
        .card {
            background-color: #ffffff;
            border-radius: 24px; /* Large rounded corners */
            box-shadow: 8px 8px 16px rgba(217, 217, 217, 0.3), -8px -8px 16px rgba(255, 255, 255, 0.8); /* Soft diffuse shadow */
            padding: 2rem;
            transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        }
        .card:hover {
             transform: translateY(-3px);
             box-shadow: 12px 12px 24px rgba(209, 209, 209, 0.4), -10px -10px 20px rgba(255, 255, 255, 0.9);
        }
        .soft-shadow {
             box-shadow: 4px 4px 8px rgba(217, 217, 217, 0.2), -4px -4px 8px rgba(255, 255, 255, 0.7);
        }
        .text-primary-soft {
            color: #6c757d; /* Low saturation primary */
        }
        .text-secondary-soft {
            color: #adb5bd; /* Softer secondary */
        }
        .bg-pastel-pink {
            background-color: #fce8e6; /* Pastel pink */
        }
        .bg-pastel-blue {
             background-color: #e8f0fe; /* Pastel blue */
        }
        .bg-pastel-green {
             background-color: #e6f4ea; /* Pastel green */
        }
        .icon-style {
            font-size: 1.5rem;
            color: #868e96; /* Soft icon color */
            margin-right: 0.75rem;
            width: 2rem; /* Fixed width for alignment */
            text-align: center;
        }
        /* Custom scrollbar for forecast */
        .forecast-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .forecast-scroll::-webkit-scrollbar-track {
            background: #f1f3f5;
            border-radius: 10px;
        }
        .forecast-scroll::-webkit-scrollbar-thumb {
            background: #dee2e6;
            border-radius: 10px;
        }
        .forecast-scroll::-webkit-scrollbar-thumb:hover {
            background: #ced4da;
        }
        /* Audio Player Styles */
        .audio-player button {
            background: none;
            border: none;
            color: #495057;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .audio-player button:hover {
            color: #212529;
        }
        .audio-player input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 5px;
            cursor: pointer;
            outline: none;
        }
        .audio-player input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #868e96;
            border-radius: 50%;
            cursor: pointer;
        }
        .audio-player input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #868e96;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        /* Animation Placeholder */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .title-overlay {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-size: 1.5rem;
            font-weight: 600;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- Top Left: Title -->
        <div class="relative card overflow-hidden h-48 md:h-64 scroll-reveal">
            <img src="title.jpeg" alt="Podcast Title Background" class="absolute inset-0 w-full h-full object-cover">
            <h1 class="title-overlay">DenyaのAI智能播报小助手</h1>
        </div>

        <!-- Top Right: Date & Player -->
        <div class="relative card overflow-hidden scroll-reveal">
             <img src="backgroud.jpeg" alt="Background" class="absolute inset-0 w-full h-full object-cover opacity-30">
             <div class="relative z-10 space-y-6">
                <!-- Date/Clock -->
                <div class="text-center">
                    <div id="date-display" class="text-2xl font-semibold text-primary-soft"></div>
                    <div id="day-display" class="text-4xl font-bold text-gray-700"></div>
                </div>
                <!-- Audio Player -->
                <div class="audio-player space-y-3">
                    <audio id="podcast-audio" src="https://minimax-algeng-chat-tts.oss-cn-wulanchabu.aliyuncs.com/audio%2Ftts-mp3-20250418201005-pMQbJGzZ.mp3?Expires=86401744978205&OSSAccessKeyId=LTAI5tGLnRTkBjLuYPjNcKQ8&Signature=RH3kvEvZRmJOoVyn57sVhxixw7M%3D"></audio>
                    <div class="flex items-center justify-center space-x-6">
                        <button id="rewind-btn"><i class="fas fa-backward"></i></button>
                        <button id="play-pause-btn"><i class="fas fa-play"></i></button>
                        <button id="forward-btn"><i class="fas fa-forward"></i></button>
                    </div>
                    <div class="flex items-center space-x-3">
                        <span id="current-time" class="text-sm text-secondary-soft w-10 text-right">0:00</span>
                        <input type="range" id="progress-bar" value="0" class="flex-grow">
                        <span id="duration" class="text-sm text-secondary-soft w-10">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Middle Left: Current Weather -->
        <div class="card space-y-4 scroll-reveal">
            <h2 class="text-xl font-semibold text-primary-soft mb-4">今日天气 (日本, 东京都)</h2>
            <div class="flex items-center">
                <i class="fas fa-sun icon-style"></i> <!-- Placeholder, update based on actual condition -->
                <span id="current-condition" class="text-lg font-medium">clear sky</span>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-pastel-pink p-4 rounded-xl soft-shadow flex items-center">
                    <i class="fas fa-temperature-half icon-style"></i>
                    <div>
                        <div class="text-sm text-secondary-soft">当前气温</div>
                        <div id="current-temp" class="text-lg font-semibold">20.36 °C</div>
                    </div>
                </div>
                 <div class="bg-pastel-blue p-4 rounded-xl soft-shadow flex items-center">
                    <i class="fas fa-temperature-arrow-down icon-style"></i>
                    <div>
                        <div class="text-sm text-secondary-soft">体感温度</div>
                        <div id="feels-like" class="text-lg font-semibold">20.23 °C</div>
                    </div>
                </div>
                 <div class="bg-pastel-green p-4 rounded-xl soft-shadow flex items-center">
                    <i class="fas fa-wind icon-style"></i>
                    <div>
                        <div class="text-sm text-secondary-soft">风力</div>
                        <div id="wind-speed" class="text-lg font-semibold">7.72 m/s</div>
                    </div>
                </div>
                 <div class="bg-pastel-pink p-4 rounded-xl soft-shadow flex items-center">
                    <i class="fas fa-shirt icon-style"></i>
                    <div>
                        <div class="text-sm text-secondary-soft">穿衣建议</div>
                        <div class="text-md font-medium">长袖+薄外套</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Middle Right: Weekly Forecast -->
        <div class="card scroll-reveal">
            <h2 class="text-xl font-semibold text-primary-soft mb-4">未来一周天气</h2>
            <div id="forecast-list" class="space-y-3 forecast-scroll max-h-60 overflow-y-auto pr-2">
                <!-- Forecast data will be injected here by JS -->
            </div>
        </div>

        <!-- Bottom Left: AI News -->
        <div class="card scroll-reveal flex flex-col">
            <h2 class="text-xl font-semibold text-primary-soft mb-4 flex-shrink-0">AI新闻速览</h2>
            <ul id="news-list" class="space-y-4 list-none p-0 flex-grow overflow-y-auto forecast-scroll pr-2 h-96">
                <!-- News items will be injected here by JS -->
            </ul>
        </div>

        <!-- Bottom Right: Podcast Script -->
        <div class="card scroll-reveal flex flex-col">
            <h2 class="text-xl font-semibold text-primary-soft mb-4 flex-shrink-0">播报文稿</h2>
            <div id="script-content" class="prose prose-sm max-w-none flex-grow overflow-y-auto forecast-scroll pr-2 h-96">
                <!-- Script content will be injected here by JS -->
            </div>
        </div>

    </div>

    <script>
        // --- Data ---
        const currentDate = new Date("2025-04-18T21:08:21+09:00");
        const weatherData = {"daily_forecasts": [{"date": "2025-04-18", "entries": [{"time": "2025-04-18 11:00:00", "temperature": "20.94 \u00b0C", "feels_like": "20.32 \u00b0C", "temp_min": "17.04 \u00b0C", "temp_max": "22.47 \u00b0C", "weather_condition": "overcast clouds", "humidity": "47%", "wind": {"speed": "8.84 m/s", "direction": "189 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-18 09:00:00", "temperature": "17.05 \u00b0C", "feels_like": "16.22 \u00b0C", "temp_min": "17.04 \u00b0C", "temp_max": "22.47 \u00b0C", "weather_condition": "overcast clouds", "humidity": "47%", "wind": {"speed": "8.84 m/s", "direction": "189 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-18 15:00:00", "temperature": "20.94 \u00b0C", "feels_like": "20.32 \u00b0C", "temp_min": "17.04 \u00b0C", "temp_max": "22.47 \u00b0C", "weather_condition": "overcast clouds", "humidity": "47%", "wind": {"speed": "8.84 m/s", "direction": "189 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-18 20:00:00", "temperature": "20.49 \u00b0C", "feels_like": "20.27 \u00b0C", "temp_min": "17.04 \u00b0C", "temp_max": "22.47 \u00b0C", "weather_condition": "overcast clouds", "humidity": "47%", "wind": {"speed": "8.84 m/s", "direction": "189 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-18 21:00:00", "temperature": "20.36 \u00b0C", "feels_like": "20.23 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "68%", "wind": {"speed": "6.51 m/s", "direction": "195 degrees"}, "rain": "No rain", "clouds": "0%", "pop": "0%"}, {"time": "2025-04-18 22:00:00", "temperature": "20.02 \u00b0C", "feels_like": "19.91 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "70%", "wind": {"speed": "6.22 m/s", "direction": "207 degrees"}, "rain": "No rain", "clouds": "0%", "pop": "0%"}, {"time": "2025-04-18 23:00:00", "temperature": "19.54 \u00b0C", "feels_like": "19.43 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "72%", "wind": {"speed": "5.34 m/s", "direction": "214 degrees"}, "rain": "No rain", "clouds": "0%", "pop": "0%"}], "summary": "You can expect partly cloudy in the morning, with clearing in the afternoon"}, {"date": "2025-04-19", "entries": [{"time": "2025-04-19 11:00:00", "temperature": "22.66 \u00b0C", "feels_like": "22.37 \u00b0C", "temp_min": "17.54 \u00b0C", "temp_max": "24.81 \u00b0C", "weather_condition": "clear sky", "humidity": "53%", "wind": {"speed": "7.56 m/s", "direction": "174 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 09:00:00", "temperature": "17.54 \u00b0C", "feels_like": "17.28 \u00b0C", "temp_min": "17.54 \u00b0C", "temp_max": "24.81 \u00b0C", "weather_condition": "clear sky", "humidity": "53%", "wind": {"speed": "7.56 m/s", "direction": "174 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 15:00:00", "temperature": "22.66 \u00b0C", "feels_like": "22.37 \u00b0C", "temp_min": "17.54 \u00b0C", "temp_max": "24.81 \u00b0C", "weather_condition": "clear sky", "humidity": "53%", "wind": {"speed": "7.56 m/s", "direction": "174 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 20:00:00", "temperature": "22.66 \u00b0C", "feels_like": "22.39 \u00b0C", "temp_min": "17.54 \u00b0C", "temp_max": "24.81 \u00b0C", "weather_condition": "clear sky", "humidity": "53%", "wind": {"speed": "7.56 m/s", "direction": "174 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 00:00:00", "temperature": "19.09 \u00b0C", "feels_like": "18.99 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "74%", "wind": {"speed": "4.35 m/s", "direction": "214 degrees"}, "rain": "No rain", "clouds": "1%", "pop": "0%"}, {"time": "2025-04-19 01:00:00", "temperature": "18.49 \u00b0C", "feels_like": "18.38 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "76%", "wind": {"speed": "3.18 m/s", "direction": "221 degrees"}, "rain": "No rain", "clouds": "1%", "pop": "0%"}, {"time": "2025-04-19 02:00:00", "temperature": "18.31 \u00b0C", "feels_like": "18.05 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "71%", "wind": {"speed": "2.3 m/s", "direction": "243 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 03:00:00", "temperature": "18.21 \u00b0C", "feels_like": "17.86 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "few clouds", "humidity": "68%", "wind": {"speed": "1.95 m/s", "direction": "250 degrees"}, "rain": "No rain", "clouds": "20%", "pop": "0%"}, {"time": "2025-04-19 04:00:00", "temperature": "17.87 \u00b0C", "feels_like": "17.57 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "71%", "wind": {"speed": "1.47 m/s", "direction": "202 degrees"}, "rain": "No rain", "clouds": "99%", "pop": "0%"}, {"time": "2025-04-19 05:00:00", "temperature": "17.54 \u00b0C", "feels_like": "17.28 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "broken clouds", "humidity": "74%", "wind": {"speed": "1.66 m/s", "direction": "231 degrees"}, "rain": "No rain", "clouds": "52%", "pop": "0%"}, {"time": "2025-04-19 06:00:00", "temperature": "17.93 \u00b0C", "feels_like": "17.68 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "scattered clouds", "humidity": "73%", "wind": {"speed": "1.59 m/s", "direction": "267 degrees"}, "rain": "No rain", "clouds": "35%", "pop": "0%"}, {"time": "2025-04-19 07:00:00", "temperature": "18.72 \u00b0C", "feels_like": "18.48 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "scattered clouds", "humidity": "70%", "wind": {"speed": "1.57 m/s", "direction": "340 degrees"}, "rain": "No rain", "clouds": "27%", "pop": "0%"}, {"time": "2025-04-19 08:00:00", "temperature": "19.83 \u00b0C", "feels_like": "19.59 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "few clouds", "humidity": "66%", "wind": {"speed": "2.47 m/s", "direction": "353 degrees"}, "rain": "No rain", "clouds": "24%", "pop": "0%"}, {"time": "2025-04-19 09:00:00", "temperature": "20.98 \u00b0C", "feels_like": "20.7 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "few clouds", "humidity": "60%", "wind": {"speed": "1.97 m/s", "direction": "36 degrees"}, "rain": "No rain", "clouds": "21%", "pop": "0%"}, {"time": "2025-04-19 10:00:00", "temperature": "21.91 \u00b0C", "feels_like": "21.62 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "56%", "wind": {"speed": "1.88 m/s", "direction": "71 degrees"}, "rain": "No rain", "clouds": "0%", "pop": "0%"}, {"time": "2025-04-19 11:00:00", "temperature": "22.66 \u00b0C", "feels_like": "22.37 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "53%", "wind": {"speed": "2.13 m/s", "direction": "114 degrees"}, "rain": "No rain", "clouds": "3%", "pop": "0%"}, {"time": "2025-04-19 12:00:00", "temperature": "23.38 \u00b0C", "feels_like": "23.08 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "50%", "wind": {"speed": "2.39 m/s", "direction": "118 degrees"}, "rain": "No rain", "clouds": "7%", "pop": "0%"}, {"time": "2025-04-19 13:00:00", "temperature": "24.28 \u00b0C", "feels_like": "23.96 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "46%", "wind": {"speed": "2.9 m/s", "direction": "142 degrees"}, "rain": "No rain", "clouds": "7%", "pop": "0%"}, {"time": "2025-04-19 14:00:00", "temperature": "24.81 \u00b0C", "feels_like": "24.5 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "44%", "wind": {"speed": "3.86 m/s", "direction": "160 degrees"}, "rain": "No rain", "clouds": "8%", "pop": "0%"}, {"time": "2025-04-19 15:00:00", "temperature": "24.51 \u00b0C", "feels_like": "24.24 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "47%", "wind": {"speed": "5.13 m/s", "direction": "179 degrees"}, "rain": "No rain", "clouds": "8%", "pop": "0%"}, {"time": "2025-04-19 16:00:00", "temperature": "23.96 \u00b0C", "feels_like": "23.66 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "48%", "wind": {"speed": "5.62 m/s", "direction": "177 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-19 17:00:00", "temperature": "22.66 \u00b0C", "feels_like": "22.39 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "54%", "wind": {"speed": "5.64 m/s", "direction": "182 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-19 18:00:00", "temperature": "21.87 \u00b0C", "feels_like": "21.65 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "59%", "wind": {"speed": "6.15 m/s", "direction": "185 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-19 19:00:00", "temperature": "20.64 \u00b0C", "feels_like": "20.46 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "65%", "wind": {"speed": "6.43 m/s", "direction": "184 degrees"}, "rain": "No rain", "clouds": "98%", "pop": "0%"}, {"time": "2025-04-19 20:00:00", "temperature": "19.62 \u00b0C", "feels_like": "19.44 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "69%", "wind": {"speed": "6.73 m/s", "direction": "178 degrees"}, "rain": "No rain", "clouds": "96%", "pop": "0%"}, {"time": "2025-04-19 21:00:00", "temperature": "18.71 \u00b0C", "feels_like": "18.62 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "broken clouds", "humidity": "76%", "wind": {"speed": "6.64 m/s", "direction": "177 degrees"}, "rain": "No rain", "clouds": "82%", "pop": "0%"}, {"time": "2025-04-19 22:00:00", "temperature": "18.11 \u00b0C", "feels_like": "18.12 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "82%", "wind": {"speed": "7.26 m/s", "direction": "173 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-19 23:00:00", "temperature": "17.98 \u00b0C", "feels_like": "17.95 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "81%", "wind": {"speed": "7.56 m/s", "direction": "174 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}], "summary": "Expect a day of partly cloudy with clear spells"}, {"date": "2025-04-20", "entries": [{"time": "2025-04-20 11:00:00", "temperature": "21.36 \u00b0C", "feels_like": "21.01 \u00b0C", "temp_min": "16.81 \u00b0C", "temp_max": "21.7 \u00b0C", "weather_condition": "light rain", "humidity": "56%", "wind": {"speed": "9.71 m/s", "direction": "204 degrees"}, "rain": "1.49 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-20 09:00:00", "temperature": "18.45 \u00b0C", "feels_like": "18.34 \u00b0C", "temp_min": "16.81 \u00b0C", "temp_max": "21.7 \u00b0C", "weather_condition": "light rain", "humidity": "56%", "wind": {"speed": "9.71 m/s", "direction": "204 degrees"}, "rain": "1.49 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-20 15:00:00", "temperature": "21.36 \u00b0C", "feels_like": "21.01 \u00b0C", "temp_min": "16.81 \u00b0C", "temp_max": "21.7 \u00b0C", "weather_condition": "light rain", "humidity": "56%", "wind": {"speed": "9.71 m/s", "direction": "204 degrees"}, "rain": "1.49 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-20 20:00:00", "temperature": "21.06 \u00b0C", "feels_like": "20.84 \u00b0C", "temp_min": "16.81 \u00b0C", "temp_max": "21.7 \u00b0C", "weather_condition": "light rain", "humidity": "56%", "wind": {"speed": "9.71 m/s", "direction": "204 degrees"}, "rain": "1.49 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-20 00:00:00", "temperature": "18.28 \u00b0C", "feels_like": "18.15 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "76%", "wind": {"speed": "7.69 m/s", "direction": "186 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 01:00:00", "temperature": "18.45 \u00b0C", "feels_like": "18.36 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "77%", "wind": {"speed": "8.2 m/s", "direction": "197 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 02:00:00", "temperature": "18.32 \u00b0C", "feels_like": "18.24 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "78%", "wind": {"speed": "8.38 m/s", "direction": "202 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 03:00:00", "temperature": "18.51 \u00b0C", "feels_like": "18.43 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "77%", "wind": {"speed": "8.25 m/s", "direction": "204 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 04:00:00", "temperature": "18.48 \u00b0C", "feels_like": "18.37 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "76%", "wind": {"speed": "7.84 m/s", "direction": "206 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 05:00:00", "temperature": "18.45 \u00b0C", "feels_like": "18.34 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "76%", "wind": {"speed": "8.1 m/s", "direction": "204 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 06:00:00", "temperature": "18.59 °C", "feels_like": "18.46 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "75%", "wind": {"speed": "8.04 m/s", "direction": "206 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 07:00:00", "temperature": "18.98 \u00b0C", "feels_like": "18.79 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "71%", "wind": {"speed": "8.52 m/s", "direction": "203 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 08:00:00", "temperature": "19.75 \u00b0C", "feels_like": "19.48 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "65%", "wind": {"speed": "8.54 m/s", "direction": "209 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 09:00:00", "temperature": "20.16 \u00b0C", "feels_like": "19.85 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "62%", "wind": {"speed": "9.71 m/s", "direction": "204 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 10:00:00", "temperature": "20.95 \u00b0C", "feels_like": "20.62 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "58%", "wind": {"speed": "9.39 m/s", "direction": "205 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 11:00:00", "temperature": "21.36 \u00b0C", "feels_like": "21.01 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "56%", "wind": {"speed": "9.56 m/s", "direction": "200 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 12:00:00", "temperature": "21.65 \u00b0C", "feels_like": "21.31 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "55%", "wind": {"speed": "9.11 m/s", "direction": "201 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 13:00:00", "temperature": "21.7 \u00b0C", "feels_like": "21.39 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "56%", "wind": {"speed": "8.83 m/s", "direction": "204 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 14:00:00", "temperature": "21.53 \u00b0C", "feels_like": "21.25 °C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "58%", "wind": {"speed": "8.22 m/s", "direction": "201 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 15:00:00", "temperature": "21.02 \u00b0C", "feels_like": "20.74 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "60%", "wind": {"speed": "7.99 m/s", "direction": "203 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 16:00:00", "temperature": "20.97 \u00b0C", "feels_like": "20.72 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "61%", "wind": {"speed": "7.78 m/s", "direction": "212 degrees"}, "rain": "No rain", "clouds": "100%", "pop": "0%"}, {"time": "2025-04-20 17:00:00", "temperature": "21.06 \u00b0C", "feels_like": "20.84 °C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "broken clouds", "humidity": "62%", "wind": {"speed": "6.93 m/s", "direction": "207 degrees"}, "rain": "No rain", "clouds": "82%", "pop": "0%"}, {"time": "2025-04-20 18:00:00", "temperature": "20.14 \u00b0C", "feels_like": "19.96 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "broken clouds", "humidity": "67%", "wind": {"speed": "5.38 m/s", "direction": "198 degrees"}, "rain": "No rain", "clouds": "82%", "pop": "0%"}, {"time": "2025-04-20 19:00:00", "temperature": "19.68 °C", "feels_like": "19.53 °C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "overcast clouds", "humidity": "70%", "wind": {"speed": "3.43 m/s", "direction": "189 degrees"}, "rain": "No rain", "clouds": "87%", "pop": "0%"}, {"time": "2025-04-20 20:00:00", "temperature": "19.64 \u00b0C", "feels_like": "19.51 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "light rain", "humidity": "71%", "wind": {"speed": "1.56 m/s", "direction": "228 degrees"}, "rain": "0.16 mm/h", "clouds": "91%", "pop": "20.0%"}], "summary": "You can expect partly cloudy in the morning, with rain in the afternoon"}, {"date": "2025-04-21", "entries": [{"time": "2025-04-21 11:00:00", "temperature": "20.43 \u00b0C", "feels_like": "19.23 \u00b0C", "temp_min": "14.18 \u00b0C", "temp_max": "23.11 \u00b0C", "weather_condition": "light rain", "humidity": "27%", "wind": {"speed": "9.9 m/s", "direction": "199 degrees"}, "rain": "1.47 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-21 09:00:00", "temperature": "14.18 \u00b0C", "feels_like": "13.4 \u00b0C", "temp_min": "14.18 \u00b0C", "temp_max": "23.11 °C", "weather_condition": "light rain", "humidity": "27%", "wind": {"speed": "9.9 m/s", "direction": "199 degrees"}, "rain": "1.47 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-21 15:00:00", "temperature": "20.43 \u00b0C", "feels_like": "19.23 °C", "temp_min": "14.18 \u00b0C", "temp_max": "23.11 °C", "weather_condition": "light rain", "humidity": "27%", "wind": {"speed": "9.9 m/s", "direction": "199 degrees"}, "rain": "1.47 mm", "clouds": "100%", "pop": "100%"}, {"time": "2025-04-21 20:00:00", "temperature": "18.98 \u00b0C", "feels_like": "18.21 °C", "temp_min": "14.18 °C", "temp_max": "23.11 °C", "weather_condition": "light rain", "humidity": "27%", "wind": {"speed": "9.9 m/s", "direction": "199 degrees"}, "rain": "1.47 mm", "clouds": "100%", "pop": "100%"}], "summary": "Expect a day of partly cloudy with rain"}, {"date": "2025-04-22", "entries": [{"time": "2025-04-22 11:00:00", "temperature": "20.97 \u00b0C", "feels_like": "20.56 \u00b0C", "temp_min": "16.07 °C", "temp_max": "20.97 °C", "weather_condition": "broken clouds", "humidity": "55%", "wind": {"speed": "13.66 m/s", "direction": "205 degrees"}, "rain": "No rain", "clouds": "69%", "pop": "0%"}, {"time": "2025-04-22 09:00:00", "temperature": "16.39 °C", "feels_like": "15.89 °C", "temp_min": "16.07 °C", "temp_max": "20.97 °C", "weather_condition": "broken clouds", "humidity": "55%", "wind": {"speed": "13.66 m/s", "direction": "205 degrees"}, "rain": "No rain", "clouds": "69%", "pop": "0%"}, {"time": "2025-04-22 15:00:00", "temperature": "20.97 °C", "feels_like": "20.56 °C", "temp_min": "16.07 °C", "temp_max": "20.97 °C", "weather_condition": "broken clouds", "humidity": "55%", "wind": {"speed": "13.66 m/s", "direction": "205 degrees"}, "rain": "No rain", "clouds": "69%", "pop": "0%"}, {"time": "2025-04-22 20:00:00", "temperature": "19.91 °C", "feels_like": "19.5 °C", "temp_min": "16.07 °C", "temp_max": "20.97 °C", "weather_condition": "broken clouds", "humidity": "55%", "wind": {"speed": "13.66 m/s", "direction": "205 degrees"}, "rain": "No rain", "clouds": "69%", "pop": "0%"}], "summary": "Expect a day of partly cloudy with clear spells"}, {"date": "2025-04-23", "entries": [{"time": "2025-04-23 11:00:00", "temperature": "21.71 \u00b0C", "feels_like": "21.89 °C", "temp_min": "18.4 °C", "temp_max": "21.71 °C", "weather_condition": "light rain", "humidity": "75%", "wind": {"speed": "11.34 m/s", "direction": "212 degrees"}, "rain": "0.34 mm", "clouds": "100%", "pop": "30.0%"}, {"time": "2025-04-23 09:00:00", "temperature": "18.4 °C", "feels_like": "18.59 °C", "temp_min": "18.4 °C", "temp_max": "21.71 °C", "weather_condition": "light rain", "humidity": "75%", "wind": {"speed": "11.34 m/s", "direction": "212 degrees"}, "rain": "0.34 mm", "clouds": "100%", "pop": "30.0%"}, {"time": "2025-04-23 15:00:00", "temperature": "21.71 °C", "feels_like": "21.89 °C", "temp_min": "18.4 °C", "temp_max": "21.71 °C", "weather_condition": "light rain", "humidity": "75%", "wind": {"speed": "11.34 m/s", "direction": "212 degrees"}, "rain": "0.34 mm", "clouds": "100%", "pop": "30.0%"}, {"time": "2025-04-23 20:00:00", "temperature": "19.47 °C", "feels_like": "19.74 °C", "temp_min": "18.4 °C", "temp_max": "21.71 °C", "weather_condition": "light rain", "humidity": "75%", "wind": {"speed": "11.34 m/s", "direction": "212 degrees"}, "rain": "0.34 mm", "clouds": "100%", "pop": "30.0%"}], "summary": "Expect a day of partly cloudy with rain"}, {"date": "2025-04-24", "entries": [{"time": "2025-04-24 11:00:00", "temperature": "24.1 \u00b0C", "feels_like": "24.21 °C", "temp_min": "19.5 °C", "temp_max": "24.1 °C", "weather_condition": "moderate rain", "humidity": "63%", "wind": {"speed": "6.09 m/s", "direction": "174 degrees"}, "rain": "4.98 mm", "clouds": "56%", "pop": "100%"}, {"time": "2025-04-24 09:00:00", "temperature": "19.66 °C", "feels_like": "19.9 °C", "temp_min": "19.5 °C", "temp_max": "24.1 °C", "weather_condition": "moderate rain", "humidity": "63%", "wind": {"speed": "6.09 m/s", "direction": "174 degrees"}, "rain": "4.98 mm", "clouds": "56%", "pop": "100%"}, {"time": "2025-04-24 15:00:00", "temperature": "24.1 °C", "feels_like": "24.21 °C", "temp_min": "19.5 °C", "temp_max": "24.1 °C", "weather_condition": "moderate rain", "humidity": "63%", "wind": {"speed": "6.09 m/s", "direction": "174 degrees"}, "rain": "4.98 mm", "clouds": "56%", "pop": "100%"}, {"time": "2025-04-24 20:00:00", "temperature": "20.25 °C", "feels_like": "20.34 °C", "temp_min": "19.5 °C", "temp_max": "24.1 °C", "weather_condition": "moderate rain", "humidity": "63%", "wind": {"speed": "6.09 m/s", "direction": "174 degrees"}, "rain": "4.98 mm", "clouds": "56%", "pop": "100%"}], "summary": "Expect a day of partly cloudy with rain"}, {"date": "2025-04-25", "entries": [{"time": "2025-04-25 11:00:00", "temperature": "19.03 °C", "feels_like": "18.27 °C", "temp_min": "15.76 °C", "temp_max": "19.6 °C", "weather_condition": "light rain", "humidity": "49%", "wind": {"speed": "7.56 m/s", "direction": "43 degrees"}, "rain": "0.3 mm", "clouds": "74%", "pop": "56.99999999999999%"}, {"time": "2025-04-25 09:00:00", "temperature": "15.76 °C", "feels_like": "14.93 °C", "temp_min": "15.76 °C", "temp_max": "19.6 °C", "weather_condition": "light rain", "humidity": "49%", "wind": {"speed": "7.56 m/s", "direction": "43 degrees"}, "rain": "0.3 mm", "clouds": "74%", "pop": "56.99999999999999%"}, {"time": "2025-04-25 15:00:00", "temperature": "19.03 °C", "feels_like": "18.27 °C", "temp_min": "15.76 °C", "temp_max": "19.6 °C", "weather_condition": "light rain", "humidity": "49%", "wind": {"speed": "7.56 m/s", "direction": "43 degrees"}, "rain": "0.3 mm", "clouds": "74%", "pop": "56.99999999999999%"}, {"time": "2025-04-25 20:00:00", "temperature": "18.67 °C", "feels_like": "17.95 °C", "temp_min": "15.76 °C", "temp_max": "19.6 °C", "weather_condition": "light rain", "humidity": "49%", "wind": {"speed": "7.56 m/s", "direction": "43 degrees"}, "rain": "0.3 mm", "clouds": "74%", "pop": "56.99999999999999%"}], "summary": "There will be rain until morning, then partly cloudy"}], "current": {"time": "2025-04-18 21:08:28", "temperature": "20.36 \u00b0C", "feels_like": "20.23 \u00b0C", "temp_min": "N/A", "temp_max": "N/A", "weather_condition": "clear sky", "humidity": "68%", "wind": {"speed": "7.72 m/s", "direction": "190 degrees"}, "rain": "No rain", "clouds": "0%", "pop": "N/A"}};
        const newsItems = [
            { title: "Kagi Assistant is now available to all users", summary: "Kagi搜索的AI助手现在向所有用户开放了。这个助手可以帮助用户进行更智能的搜索和信息获取。对于追求高效信息检索的用户来说，这是一个值得关注的更新。", url: "https://blog.kagi.com/assistant-for-all" },
            { title: "Gemini 2.5 Flash", summary: "谷歌发布了新的AI模型Gemini 2.5 Flash。这款模型据称在速度和效率上进行了优化，旨在为开发者提供更快速、轻量级的AI能力。开发者现在可以通过Google AI Studio和Vertex AI进行试用。", url: "https://developers.googleblog.com/en/start-building-with-gemini-25-flash/" },
            { title: "An intro to DeepSeek's distributed file system", summary: "这篇文章介绍了AI公司DeepSeek为其大规模训练任务设计的分布式文件系统。该系统旨在高效处理海量数据，支撑AI模型的训练过程。对于关注AI基础设施和底层技术的开发者来说，这提供了有价值的参考。", url: "https://maknee.github.io/blog/2025/3FS-Performance-Journal-1/" },
            { title: "Discord's face scanning age checks 'start of a bigger shift'", summary: "Discord开始使用面部扫描技术进行年龄验证，引发了关于隐私和技术应用的讨论。此举被认为是更大范围生物识别验证趋势的一部分。这提醒我们在享受技术便利的同时，也要关注其带来的社会影响。", url: "https://www.bbc.com/news/articles/cjr75wypg0vo" },
            { title: "Viral ChatGPT trend is doing 'reverse location search' from photos", summary: "ChatGPT的新功能允许用户通过上传照片来进行反向地理位置搜索。这一功能展示了AI在图像识别和地理定位方面的强大能力，但也引发了关于隐私和潜在滥用的担忧。用户在使用时需注意保护个人信息。", url: "https://techcrunch.com/2025/04/17/the-latest-viral-chatgpt-trend-is-doing-reverse-location-search-from-photos/" },
            { title: "Show HN: AgentAPI – HTTP API for Claude Code, Goose, Aider, and Codex", summary: "AgentAPI是一个新的开源项目，它提供了一个统一的HTTP接口来调用多种AI编码助手，如Claude Code, Goose, Aider和Codex。开发者可以通过这个API更方便地集成和使用不同的AI编程工具，有助于简化开发流程。", url: "https://github.com/coder/agentapi" }
        ];
        const podcastScript = `
Hello，亲爱的听众朋友们，欢迎收听“DenyaのAI智能播报小助手”！我是你们的AI伙伴，智讯小悠。很高兴又和大家在电波中相遇啦！

今天是 **2025年4月18日，星期五**。我现在正位于充满活力的**日本东京都**。

让我们看看今天东京的天气如何吧！目前室外是**晴朗**的好天气，感觉比较舒适，体感温度大约是 **20.2°C**，实际气温 **20.4°C** 左右。风力适中，大约 **7.7米/秒**，当前湿度 **68%**。今天白天最高气温预计在 **22°C** 左右，夜间最低 **17°C**。天气不错，建议穿着舒适的长袖T恤或衬衫，可以带一件轻薄的外套或开衫，以备傍晚转凉或室内外温差。

接下来看看未来一周的天气趋势。未来一周东京天气变化较多。明天（周六）天气晴朗温暖，最高可达25°C，是个出行的好日子！不过好景不长，周日（20号）和下周一（21号）预计会迎来**小雨**，气温也会有所下降。特别提醒，下周二（22号）虽然雨停转多云，但**风力会显著增大**，请大家注意防风。周三（23号）和周四（24号）可能还会有**雨水**光顾。总的来说，未来一周晴雨交替，气温略有起伏，请大家留意最新的天气预报，合理安排出行和穿着哦！

**智讯小悠:** 好了，接下来是大家最期待的AI新闻速览环节！今天我从Hacker News为大家精选了几条热点资讯。（温馨提示：由于信息源限制，今天为您带来6条精选AI新闻）

1.  **Kagi助手全面开放:** Kagi搜索的AI助手现在向所有用户开放了。这个助手可以帮助用户进行更智能的搜索和信息获取。对于追求高效信息检索的用户来说，这是一个值得关注的更新。(来源: Kagi Blog)
2.  **谷歌发布Gemini 2.5 Flash:** 谷歌发布了新的AI模型Gemini 2.5 Flash。这款模型据称在速度和效率上进行了优化，旨在为开发者提供更快速、轻量级的AI能力。开发者现在可以通过Google AI Studio和Vertex AI进行试用。(来源: Google Developers Blog)
3.  **DeepSeek的分布式文件系统揭秘:** 一篇文章介绍了AI公司DeepSeek为其大规模训练任务设计的分布式文件系统。该系统旨在高效处理海量数据，支撑AI模型的训练过程。对于关注AI基础设施和底层技术的开发者来说，这提供了有价值的参考。(来源: maknee.github.io)
4.  **Discord面部扫描引关注:** Discord开始使用面部扫描技术进行年龄验证，引发了关于隐私和技术应用的讨论。此举被认为是更大范围生物识别验证趋势的一部分。这提醒我们在享受技术便利的同时，也要关注其带来的社会影响。(来源: BBC News)
5.  **ChatGPT照片反向定位新玩法:** ChatGPT的新功能允许用户通过上传照片来进行反向地理位置搜索。这一功能展示了AI在图像识别和地理定位方面的强大能力，但也引发了关于隐私和潜在滥用的担忧。用户在使用时需注意保护个人信息。(来源: TechCrunch)
6.  **AgentAPI统一AI编码助手接口:** AgentAPI是一个新的开源项目，它提供了一个统一的HTTP接口来调用多种AI编码助手，如Claude Code, Goose, Aider和Codex。开发者可以通过这个API更方便地集成和使用不同的AI编程工具，有助于简化开发流程。(来源: GitHub)

以上就是今天为您带来的AI新闻速览。希望这些信息能帮助大家及时了解AI领域的最新动态。

好了，本期“DenyaのAI智能播报小助手”到这里就要和大家说再见啦。感谢您的收听，我是智讯小悠，期待下次与您再会！祝您拥有愉快的一天！
        `;

        // --- DOM Elements ---
        const dateDisplay = document.getElementById('date-display');
        const dayDisplay = document.getElementById('day-display');
        const currentCondition = document.getElementById('current-condition');
        const currentTemp = document.getElementById('current-temp');
        const feelsLike = document.getElementById('feels-like');
        const windSpeed = document.getElementById('wind-speed');
        const forecastList = document.getElementById('forecast-list');
        const newsList = document.getElementById('news-list');
        const scriptContent = document.getElementById('script-content');
        const podcastAudio = document.getElementById('podcast-audio');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const rewindBtn = document.getElementById('rewind-btn');
        const forwardBtn = document.getElementById('forward-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeDisplay = document.getElementById('current-time');
        const durationDisplay = document.getElementById('duration');

        // --- Functions ---

        // Format Date (YYYY年MM月DD日)
        function formatDate(date) {
            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const day = date.getDate().toString().padStart(2, '0');
            return `${year}年${month}月${day}日`;
        }

        // Format Day (星期X)
        function formatDay(date) {
            const days = ['日', '一', '二', '三', '四', '五', '六'];
            return `星期${days[date.getDay()]}`;
        }

        // Map weather condition to Font Awesome icon
        function getWeatherIcon(condition) {
            const lowerCaseCondition = condition.toLowerCase();
            if (lowerCaseCondition.includes('clear')) return 'fa-sun';
            if (lowerCaseCondition.includes('few clouds')) return 'fa-cloud-sun';
            if (lowerCaseCondition.includes('scattered clouds') || lowerCaseCondition.includes('broken clouds')) return 'fa-cloud';
            if (lowerCaseCondition.includes('overcast clouds')) return 'fa-cloud'; // Could use fa-smog but fa-cloud is safer
            if (lowerCaseCondition.includes('shower rain') || lowerCaseCondition.includes('light rain')) return 'fa-cloud-showers-heavy';
            if (lowerCaseCondition.includes('rain')) return 'fa-cloud-rain';
            if (lowerCaseCondition.includes('thunderstorm')) return 'fa-cloud-bolt';
            if (lowerCaseCondition.includes('snow')) return 'fa-snowflake';
            if (lowerCaseCondition.includes('mist') || lowerCaseCondition.includes('fog')) return 'fa-smog';
            return 'fa-question-circle'; // Default icon
        }

        // Format time (MM:SS)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        // Populate Date & Clock
        dateDisplay.textContent = formatDate(currentDate);
        dayDisplay.textContent = formatDay(currentDate);

        // Populate Current Weather
        const currentWeatherData = weatherData.current;
        currentCondition.textContent = currentWeatherData.weather_condition;
        currentTemp.textContent = currentWeatherData.temperature;
        feelsLike.textContent = currentWeatherData.feels_like;
        windSpeed.textContent = currentWeatherData.wind.speed;
        // Update weather icon
        const currentIconElement = document.querySelector('#current-condition').previousElementSibling; // Get the <i> tag
        currentIconElement.className = `fas ${getWeatherIcon(currentWeatherData.weather_condition)} icon-style`;


        // Populate Weekly Forecast
        weatherData.daily_forecasts.slice(1).forEach(day => { // Skip today
            // Find representative entry (e.g., around noon or highest temp)
            let representativeEntry = day.entries.find(e => e.time.includes("11:00:00")) || day.entries[0];
             if (!representativeEntry && day.entries.length > 0) {
                // Fallback: find entry with max temp if 11:00 is missing
                representativeEntry = day.entries.reduce((max, entry) => {
                    const tempMax = parseFloat(entry.temp_max?.replace(' °C', '')) || -Infinity;
                    const currentMax = parseFloat(max.temp_max?.replace(' °C', '')) || -Infinity;
                    return tempMax > currentMax ? entry : max;
                }, day.entries[0]);
            }

            if (representativeEntry) {
                const forecastDate = new Date(day.date);
                const dayElement = document.createElement('div');
                dayElement.className = 'flex items-center justify-between p-2 bg-gray-50 rounded-lg soft-shadow';
                dayElement.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas ${getWeatherIcon(representativeEntry.weather_condition)} icon-style text-base mr-2"></i>
                        <div>
                            <span class="font-medium text-sm">${formatDate(forecastDate)} (${formatDay(forecastDate)})</span>
                            <span class="text-xs text-secondary-soft block">${representativeEntry.weather_condition}</span>
                        </div>
                    </div>
                    <span class="text-sm font-semibold">${representativeEntry.temp_max || representativeEntry.temperature} / ${representativeEntry.temp_min || 'N/A'}</span>
                `;
                forecastList.appendChild(dayElement);
            }
        });

        // Populate AI News
        newsItems.forEach(item => {
            const listItem = document.createElement('li');
            listItem.className = 'p-3 bg-gray-50 rounded-lg soft-shadow hover:bg-gray-100 transition duration-200';
            listItem.innerHTML = `
                <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="block">
                    <h3 class="font-semibold text-primary-soft mb-1">${item.title}</h3>
                    <p class="text-sm text-secondary-soft">${item.summary}</p>
                </a>
            `;
            newsList.appendChild(listItem);
        });

        // Populate Script
        // Convert markdown-like bold to <strong> for better semantics
        let formattedScript = podcastScript.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        // Add paragraphs for spacing
        formattedScript = formattedScript.split('\n\n').map(p => `<p>${p.replace(/\n/g, '<br>')}</p>`).join('');
        scriptContent.innerHTML = formattedScript;


        // --- Audio Player Logic ---
        playPauseBtn.addEventListener('click', () => {
            if (podcastAudio.paused || podcastAudio.ended) {
                podcastAudio.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                podcastAudio.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        });

        rewindBtn.addEventListener('click', () => {
            podcastAudio.currentTime = Math.max(0, podcastAudio.currentTime - 10); // Rewind 10 seconds
        });

        forwardBtn.addEventListener('click', () => {
            podcastAudio.currentTime = Math.min(podcastAudio.duration, podcastAudio.currentTime + 10); // Forward 10 seconds
        });

        podcastAudio.addEventListener('loadedmetadata', () => {
            durationDisplay.textContent = formatTime(podcastAudio.duration);
            progressBar.max = podcastAudio.duration;
        });

        podcastAudio.addEventListener('timeupdate', () => {
            currentTimeDisplay.textContent = formatTime(podcastAudio.currentTime);
            progressBar.value = podcastAudio.currentTime;
        });

         podcastAudio.addEventListener('ended', () => {
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            progressBar.value = 0;
            currentTimeDisplay.textContent = '0:00';
        });

        progressBar.addEventListener('input', () => {
            podcastAudio.currentTime = progressBar.value;
        });

        // --- Scroll Animation ---
        const scrollElements = document.querySelectorAll('.scroll-reveal');

        const elementInView = (el, dividend = 1) => {
            const elementTop = el.getBoundingClientRect().top;
            return (
                elementTop <= (window.innerHeight || document.documentElement.clientHeight) / dividend
            );
        };

        const displayScrollElement = (element) => {
            element.classList.add('visible');
        };

        const hideScrollElement = (element) => {
             element.classList.remove('visible');
        };

        const handleScrollAnimation = () => {
            scrollElements.forEach((el) => {
                if (elementInView(el, 1.15)) { // Trigger slightly before fully in view
                    displayScrollElement(el);
                }
                // Optional: hide element when scrolled out of view
                // else {
                //     hideScrollElement(el);
                // }
            });
        };

        // Initial check in case elements are already in view
        handleScrollAnimation();
        window.addEventListener('scroll', handleScrollAnimation);

    </script>
</body>
</html>
